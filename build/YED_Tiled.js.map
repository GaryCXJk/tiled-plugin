{"version":3,"sources":["webpack:///webpack/bootstrap c42397a3b805c518e157","webpack:///./src/TiledTilemap.js","webpack:///./src/index.js","webpack:///./src/TilesetManager.js","webpack:///./src/DataManager.js","webpack:///./src/ImageManager.js","webpack:///./src/TiledManager.js","webpack:///./src/Game_Map.js","webpack:///./src/Game_CharacterBase.js","webpack:///./src/Game_Player.js","webpack:///./src/Spriteset_Map.js","webpack:///./src/Sprite_Character.js"],"names":["TiledTilemap","tiledData","_tiledData","_layers","_priorityTiles","_priorityTilesCount","setupTiled","_setupSize","_setupAnim","width","_width","height","_height","margin","_margin","tileCols","Math","ceil","_tileWidth","tileRows","_tileHeight","tilewidth","tileheight","_layerWidth","_layerHeight","_mapWidth","_mapHeight","_animFrame","_animDuration","id","_needsRepaint","parameters","PluginManager","useSquareShader","Number","hasOwnProperty","layers","layerData","zIndex","type","properties","parseInt","collision","toLevel","regionId","tileFlags","layer","PIXI","tilemap","CompositeRectTileLayer","layerId","spriteId","Sprite","_counter","push","addChild","_createPriorityTiles","pluginParams","size","Array","keys","x","sprite","Sprite_Base","z","hide","renderer","bitmaps","map","_baseTexture","Texture","setBitmaps","_updateAnim","needRefresh","key","refresh","startX","startY","ox","oy","roundPixels","floor","origin","y","offsetX","offsetx","offsetY","offsety","position","origX","origY","clear","_paintTiles","_paintObjectLayers","length","visible","_paintTilesLayer","objects","obj","gid","tileId","textureId","_getTextureId","dx","dy","_paintPriorityTile","_paintTile","mx","my","horizontalWrap","mod","verticalWrap","tilePosition","data","rectLayer","children","tileset","tilesets","w","h","columns","rId","_getAnimTileId","firstgid","ux","uy","_isPriorityTile","locationHeight","tileproperties","addRect","anchor","bitmap","setFrame","priority","_getPriority","_getZIndex","show","tilecount","tilesData","tiles","animation","frame","duration","tileid","playerZIndex","level","layerIds","hideOnLevel","removeChild","forEach","indexOf","hiddenData","TiledManager","checkLayerHidden","hasHideProperties","hideLayer","a","b","val","ShaderTilemap","addListener","Game_Player","options","d","$gameParty","members","actor","checkFloorEffect","moveStraight","addHideFunction","$gameMap","$gamePlayer","hideOnRegion","hideOnRegions","split","String","regionIds","regions","filter","region","$gameSwitches","value","hideOnSwitch","addFlag","TilesetManager","Error","window","_getFilename","path","paths","_getRealPath","getTileset","realPath","loadTileset","callback","xhr","XMLHttpRequest","open","overrideMimeType","onreadystatechange","readyState","status","responseText","JSON","parse","send","DataManager","_tempTiledData","_tiledLoaded","_loadMapData","loadMapData","mapId","call","loadTiledMapData","unloadTiledMapData","idx","tiledLoaded","tilesRequired","source","realTileset","Object","assign","returnTileset","_isMapLoaded","isMapLoaded","defaultLoaded","ImageManager","loadParserTileset","hue","loadEmptyBitmap","filename","loadNormalBitmap","loadParserParallax","_listeners","_hideFunctions","_hideIgnoreFunctions","collisions","levelChanges","_tileFlags","_tileFlagIndex","objectName","listener","recursive","name","triggerListener","object","constructor","top","proto","__proto__","ignore","flagIds","flagId","getFlag","getFlagNames","getFlagLocation","flag","bit","group","defineProperty","Game_Map","prototype","get","configurable","varID","_currentMapLevel","$gameVariables","set","setValue","_setup","setup","_collisionMap","_arrowCollisionMap","_regions","_mapLevelChange","_collisionMapLayers","_arrowCollisionMapLayers","_regionsLayers","_mapLevelChangeLayers","_tileFlagsLayers","currentMapLevel","isTiledMap","$dataMap","_setupTiled","_tiledInitialized","_refreshList","character","refreshBushDepth","isTiledInitialized","setRefreshDepth","_initializeMapLevel","_setupCollision","_setupRegion","_setupMapLevelChange","_setupTileFlags","_setupTiledEvents","_initializeMapLevelData","dataTypes","defaultData","dataType","defaultValue","typeData","_setupCollisionFull","_setupCollisionArrow","halfWidth","halfHeight","isHalfTile","realX","ids","_getTileset","tileData","collisionUpLeft","collisionUpRight","collisionDownLeft","collisionDownRight","arrowImpassable","arrowCollisionMap","realBit","arrowImpassableDown","arrowImpassableLeft","arrowImpassableRight","arrowImpassableUp","regionMap","regionOffset","levelChangeMap","tileFlagMap","_getTileFlags","_combineFlags","flags","flagNames","property","prop","slice","toUpperCase","i","target","eventId","event","_events","tileWidth","tileHeight","locate","_tiledProperties","toLowerCase","_regionId","allIds","index","regionLayer","regionValue","main","regionValues","hideData","_checkPassage","checkPassage","render","arrows","arrowLayer","arrowValue","renderPassage","getPassageLayers","_isPassable","isPassable","collisionMap","collisionLayer","collisionValue","renderIsPassable","getIsPassableLayers","checkMapLevelChanging","mapLevelChange","mapLevelChangeLayer","mapLevelChangeValue","getTileFlags","tileFlagsLayer","tileFlagsValue","renderTileFlags","checkHasTileFlag","renderHasTileFlag","_isBoatPassable","isBoatPassable","renderIsBoatPassable","_isShipPassable","isShipPassable","renderIsShipPassable","_isAirshipLandOk","isAirshipLandOk","renderIsAirshipLandOk","_isLadder","isLadder","isValid","renderIsLadder","_isBush","isBush","renderIsBush","_isCounter","isCounter","renderIsCounter","_isDamageFloor","isDamageFloor","renderIsDamageFloor","isSlipperyFloor","renderIsSlipperyFloor","getLayerProperties","ignoreHidden","layerProperties","getTileProperties","tileProperties","Game_CharacterBase","screenZ","_priorityType","_distancePerFrame","distancePerFrame","distance","min","_refreshBushDepth","_bushDepth","_updateMove","updateMove","hori","_realX","_x","vert","_realY","_y","isMoving","_locationHeight","_checkEventTriggerHere","checkEventTriggerHere","triggers","_checkMapLevelChangingHere","_createTilemap","Spriteset_Map","createTilemap","_tilemap","isLoopHorizontal","isLoopVertical","_baseSprite","_loadTileset","image","refreshTileset","_tileset","_update","update","_updateHideOnLevel","_updateHideOnSpecial","updateTileset","hideOnSpecial","Sprite_Character","_character"],"mappings":"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","file":"YED_Tiled.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c42397a3b805c518e157","export class TiledTilemap extends ShaderTilemap {\r\n    initialize(tiledData) {\r\n        this._tiledData = {};\r\n        this._layers = [];\r\n        this._priorityTiles = [];\r\n        this._priorityTilesCount = 0;\r\n        this.tiledData = tiledData;\r\n        super.initialize();\r\n        this.setupTiled();\r\n    }\r\n\r\n    get tiledData() {\r\n        return this._tiledData;\r\n    }\r\n\r\n    set tiledData(val) {\r\n        this._tiledData = val;\r\n        this.setupTiled();\r\n    }\r\n\r\n    setupTiled() {\r\n        this._setupSize();\r\n        this._setupAnim();\r\n    }\r\n\r\n    _setupSize() {\r\n        let width = this._width;\r\n        let height = this._height;\r\n        let margin = this._margin;\r\n        let tileCols = Math.ceil(width / this._tileWidth) + 1;\r\n        let tileRows = Math.ceil(height / this._tileHeight) + 1;\r\n        this._tileWidth = this.tiledData.tilewidth;\r\n        this._tileHeight = this.tiledData.tileheight;\r\n        this._layerWidth = tileCols * this._tileWidth;\r\n        this._layerHeight = tileRows * this._tileHeight;\r\n        this._mapWidth = this.tiledData.width;\r\n        this._mapHeight = this.tiledData.height;\r\n    }\r\n\r\n    _setupAnim() {\r\n        this._animFrame = {};\r\n        this._animDuration = {};\r\n    }\r\n\r\n    _createLayers() {\r\n        let id = 0;\r\n        this._needsRepaint = true;\r\n\r\n        let parameters = PluginManager.parameters('ShaderTilemap');\r\n        let useSquareShader = Number(parameters.hasOwnProperty('squareShader') ? parameters['squareShader'] : 1);\r\n\r\n        for (let layerData of this.tiledData.layers) {\r\n            let zIndex = 0;\r\n            if (layerData.type != \"tilelayer\") {\r\n                id++;\r\n                continue;\r\n            }\r\n\r\n            if (!!layerData.properties && !!layerData.properties.zIndex) {\r\n                zIndex = parseInt(layerData.properties.zIndex);\r\n            }\r\n\r\n            if (!!layerData.properties && !!layerData.properties.collision) {\r\n                id++;\r\n                continue;\r\n            }\r\n\r\n            if (!!layerData.properties && !!layerData.properties.toLevel) {\r\n                id++;\r\n                continue;\r\n            }\r\n\r\n            if (!!layerData.properties && !!layerData.properties.regionId) {\r\n                id++;\r\n                continue;\r\n            }\r\n\r\n            if (!!layerData.properties && layerData.properties.tileFlags === 'hide') {\r\n                id++;\r\n                continue;\r\n            }\r\n\r\n            let layer = new PIXI.tilemap.CompositeRectTileLayer(zIndex, [], useSquareShader);\r\n            layer.layerId = id; // @dryami: hack layer index\r\n            layer.spriteId = Sprite._counter++;\r\n            this._layers.push(layer);\r\n            this.addChild(layer);\r\n            id++;\r\n        }\r\n\r\n        this._createPriorityTiles();\r\n    }\r\n\r\n    _createPriorityTiles() {\r\n        let pluginParams = PluginManager.parameters(\"YED_Tiled\");\r\n        let size = parseInt(pluginParams[\"Priority Tiles Limit\"]);\r\n        let zIndex = parseInt(pluginParams[\"Z - Player\"]);\r\n        for (let x of Array(size).keys()) {\r\n            let sprite = new Sprite_Base();\r\n            sprite.z = sprite.zIndex = zIndex;\r\n            sprite.layerId = -1;\r\n            sprite.hide();\r\n            this.addChild(sprite);\r\n            this._priorityTiles.push(sprite);\r\n        }\r\n    }\r\n\r\n    _hackRenderer(renderer) {\r\n        return renderer;\r\n    }\r\n\r\n    refreshTileset() {\r\n        var bitmaps = this.bitmaps.map(function (x) { return x._baseTexture ? new PIXI.Texture(x._baseTexture) : x; });\r\n        for (let layer of this._layers) {\r\n            layer.setBitmaps(bitmaps);\r\n        }\r\n    }\r\n\r\n    update() {\r\n        super.update();\r\n        this._updateAnim();\r\n    }\r\n\r\n    _updateAnim() {\r\n        let needRefresh = false;\r\n        for (let key in this._animDuration) {\r\n            this._animDuration[key] -= 1;\r\n            if (this._animDuration[key] <= 0) {\r\n                this._animFrame[key] += 1;\r\n                needRefresh = true;\r\n            }\r\n        }\r\n\r\n        if (needRefresh) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    _updateLayerPositions(startX, startY) {\r\n        let ox = 0;\r\n        let oy = 0;\r\n        if (this.roundPixels) {\r\n            ox = Math.floor(this.origin.x);\r\n            oy = Math.floor(this.origin.y);\r\n        } else {\r\n            ox = this.origin.x;\r\n            oy = this.origin.y;\r\n        }\r\n\r\n        for (let layer of this._layers) {\r\n            let layerData = this.tiledData.layers[layer.layerId];\r\n            let offsetX = layerData.offsetx || 0;\r\n            let offsetY = layerData.offsety || 0;\r\n            layer.position.x = startX * this._tileWidth - ox + offsetX;\r\n            layer.position.y = startY * this._tileHeight - oy + offsetY;\r\n        }\r\n\r\n        for (let sprite of this._priorityTiles) {\r\n            let layerData = this.tiledData.layers[sprite.layerId];\r\n            let offsetX = layerData ? layerData.offsetx || 0 : 0;\r\n            let offsetY = layerData ? layerData.offsety || 0 : 0;\r\n            sprite.x = sprite.origX + startX * this._tileWidth - ox + offsetX + sprite.width / 2;\r\n            sprite.y = sprite.origY + startY * this._tileHeight - oy + offsetY + sprite.height;\r\n        }\r\n    }\r\n\r\n    _paintAllTiles(startX, startY) {\r\n        this._priorityTilesCount = 0;\r\n        for (let layer of this._layers) {\r\n            layer.clear();\r\n            this._paintTiles(layer, startX, startY);\r\n        }\r\n        let id = 0;\r\n        for (let layerData of this.tiledData.layers) {\r\n            if (layerData.type != \"objectgroup\") {\r\n                id++;\r\n                continue;\r\n            }\r\n            this._paintObjectLayers(id, startX, startY);\r\n            id++;\r\n        }\r\n        while (this._priorityTilesCount < this._priorityTiles.length) {\r\n            let sprite = this._priorityTiles[this._priorityTilesCount];\r\n            sprite.hide();\r\n            sprite.layerId = -1;\r\n            this._priorityTilesCount++;\r\n        }\r\n    }\r\n\r\n    _paintTiles(layer, startX, startY) {\r\n        let layerData = this.tiledData.layers[layer.layerId];\r\n\r\n        if (!layerData.visible) {\r\n            return;\r\n        }\r\n\r\n        if (layerData.type == \"tilelayer\") {\r\n            this._paintTilesLayer(layer, startX, startY);\r\n        }\r\n    }\r\n\r\n    _paintObjectLayers(layerId, startX, startY) {\r\n        let layerData = this.tiledData.layers[layerId];\r\n        let objects = layerData.objects || [];\r\n\r\n        for (let obj of objects) {\r\n            if (!obj.gid) {\r\n                continue;\r\n            }\r\n            if (!obj.visible) {\r\n                continue;\r\n            }\r\n            let tileId = obj.gid;\r\n            let textureId = this._getTextureId(tileId);\r\n            let dx = obj.x - startX * this._tileWidth;\r\n            let dy = obj.y - startY * this._tileHeight - obj.height;\r\n            this._paintPriorityTile(layerId, textureId, tileId, startX, startY, dx, dy);\r\n        }\r\n    }\r\n\r\n    _paintTilesLayer(layer, startX, startY) {\r\n        let tileCols = Math.ceil(this._width / this._tileWidth) + 1;\r\n        let tileRows = Math.ceil(this._height / this._tileHeight) + 1;\r\n\r\n        for (let y of Array(tileRows).keys()) {\r\n            for (let x of Array(tileCols).keys()) {\r\n                this._paintTile(layer, startX, startY, x, y);\r\n            }\r\n        }\r\n    }\r\n\r\n    _paintTile(layer, startX, startY, x, y) {\r\n        let mx = x + startX;\r\n        let my = y + startY;\r\n        if (this.horizontalWrap) {\r\n            mx = mx.mod(this._mapWidth);\r\n        }\r\n        if (this.verticalWrap) {\r\n            my = my.mod(this._mapHeight);\r\n        }\r\n        let tilePosition = mx + my * this._mapWidth;\r\n        let tileId = this.tiledData.layers[layer.layerId].data[tilePosition];\r\n        let rectLayer = layer.children[0];\r\n        let textureId = 0;\r\n\r\n        if (!tileId) {\r\n            return;\r\n        }\r\n\r\n        // TODO: Problem with offsets\r\n        if (mx < 0 || mx >= this._mapWidth || my < 0 || my >= this._mapHeight) {\r\n            return;\r\n        }\r\n\r\n        textureId = this._getTextureId(tileId);\r\n\r\n        let tileset = this.tiledData.tilesets[textureId];\r\n        let dx = x * this._tileWidth;\r\n        let dy = y * this._tileHeight;\r\n        let w = tileset.tilewidth;\r\n        let h = tileset.tileheight;\r\n        let tileCols = tileset.columns;\r\n        let rId = this._getAnimTileId(textureId, tileId - tileset.firstgid);\r\n        let ux = (rId % tileCols) * w;\r\n        let uy = Math.floor(rId / tileCols) * h;\r\n\r\n        if (this._isPriorityTile(layer.layerId)) {\r\n            let locationHeight = 0;\r\n            if(this.tiledData.layers[layer.layerId].properties.locationHeight) {\r\n                locationHeight+= this.tiledData.layers[layer.layerId].properties.locationHeight || 0\r\n            }\r\n            if(tileset.tileproperties &&\r\n                tileset.tileproperties[tileId - tileset.firstgid] &&\r\n                tileset.tileproperties[tileId - tileset.firstgid].locationHeight) {\r\n                locationHeight+= tileset.tileproperties[tileId - tileset.firstgid].locationHeight || 0\r\n            }\r\n            this._paintPriorityTile(layer.layerId, textureId, tileId, startX, startY, dx, dy, locationHeight);\r\n            return;\r\n        }\r\n\r\n        rectLayer.addRect(textureId, ux, uy, dx, dy, w, h);\r\n    }\r\n\r\n    _paintPriorityTile(layerId, textureId, tileId, startX, startY, dx, dy, locationHeight = 0) {\r\n        let tileset = this.tiledData.tilesets[textureId];\r\n        let w = tileset.tilewidth;\r\n        let h = tileset.tileheight;\r\n        let tileCols = tileset.columns;\r\n        let rId = this._getAnimTileId(textureId, tileId - tileset.firstgid);\r\n        let ux = (rId % tileCols) * w;\r\n        let uy = Math.floor(rId / tileCols) * h;\r\n        let sprite = this._priorityTiles[this._priorityTilesCount];\r\n        let layerData = this.tiledData.layers[layerId];\r\n        let offsetX = layerData ? layerData.offsetx || 0 : 0;\r\n        let offsetY = layerData ? layerData.offsety || 0 : 0;\r\n        let ox = 0;\r\n        let oy = 0;\r\n        if (this.roundPixels) {\r\n            ox = Math.floor(this.origin.x);\r\n            oy = Math.floor(this.origin.y);\r\n        } else {\r\n            ox = this.origin.x;\r\n            oy = this.origin.y;\r\n        }\r\n\r\n        if (this._priorityTilesCount >= this._priorityTiles.length) {\r\n            return;\r\n        }\r\n\r\n        sprite.layerId = layerId;\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 1.0;\r\n        sprite.origX = dx;\r\n        sprite.origY = dy;\r\n        sprite.x = sprite.origX + startX * this._tileWidth - ox + offsetX + w / 2;\r\n        sprite.y = sprite.origY + startY * this._tileHeight - oy + offsetY + h;\r\n        sprite.bitmap = this.bitmaps[textureId];\r\n        sprite.setFrame(ux, uy, w, h);\r\n        sprite.priority = this._getPriority(layerId);\r\n        sprite.z = sprite.zIndex = this._getZIndex(layerId);\r\n        sprite.locationHeight = locationHeight;\r\n        sprite.show();\r\n\r\n        this._priorityTilesCount += 1;\r\n    }\r\n\r\n    _getTextureId(tileId) {\r\n        let textureId = 0;\r\n        for (let tileset of this.tiledData.tilesets) {\r\n            if (tileId < tileset.firstgid\r\n                || tileId >= tileset.firstgid + tileset.tilecount) {\r\n                textureId++;\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n        return textureId;\r\n    }\r\n\r\n    _getAnimTileId(textureId, tileId) {\r\n        let tilesData = this.tiledData.tilesets[textureId].tiles;\r\n        if (!tilesData) {\r\n            return tileId;\r\n        }\r\n        if (!tilesData[tileId]) {\r\n            return tileId;\r\n        }\r\n        if (!tilesData[tileId].animation) {\r\n            return tileId;\r\n        }\r\n        let animation = tilesData[tileId].animation;\r\n        this._animFrame[tileId] = this._animFrame[tileId] || 0;\r\n        let frame = this._animFrame[tileId];\r\n        this._animFrame[tileId] = !!animation[frame] ? frame : 0;\r\n        frame = this._animFrame[tileId];\r\n        let duration = animation[frame].duration / 1000 * 60;\r\n        this._animDuration[tileId] = this._animDuration[tileId] || duration;\r\n        if (this._animDuration[tileId] <= 0) {\r\n            this._animDuration[tileId] = duration;\r\n        }\r\n        return animation[frame].tileid;\r\n    }\r\n\r\n    _getPriority(layerId) {\r\n        let layerData = this.tiledData.layers[layerId];\r\n        if (!layerData.properties) {\r\n            return 0;\r\n        }\r\n        if (!layerData.properties.priority) {\r\n            return 0;\r\n        }\r\n        return parseInt(layerData.properties.priority)\r\n    }\r\n\r\n    _isPriorityTile(layerId) {\r\n        let pluginParams = PluginManager.parameters(\"YED_Tiled\");\r\n        let playerZIndex = parseInt(pluginParams[\"Z - Player\"]);\r\n        let zIndex = this._getZIndex(layerId);\r\n        return this._getPriority(layerId) > 0\r\n            && zIndex === playerZIndex;\r\n    }\r\n\r\n    _getZIndex(layerId) {\r\n        let layerData = this.tiledData.layers[layerId];\r\n        if (!layerData) {\r\n            return 0;\r\n        }\r\n        if (!layerData.properties || !layerData.properties.zIndex) {\r\n            return 0;\r\n        }\r\n        return parseInt(layerData.properties.zIndex);\r\n    }\r\n\r\n    hideOnLevel(level) {\r\n        let layerIds = [];\r\n        for (let layer of this._layers) {\r\n            let layerData = this.tiledData.layers[layer.layerId];\r\n            if (layerData.properties && layerData.properties.hasOwnProperty(\"hideOnLevel\")) {\r\n                if (parseInt(layerData.properties.hideOnLevel) !== level) {\r\n                    this.addChild(layer);\r\n                    continue;\r\n                }\r\n                layerIds.push(layer.layerId);\r\n                this.removeChild(layer);\r\n            }\r\n        }\r\n        this._priorityTiles.forEach(sprite => {\r\n            if(layerIds.indexOf(sprite.layerId) > -1) {\r\n                sprite.visible = true;\r\n            }\r\n        })\r\n    }\r\n    \r\n    hideOnSpecial() {\r\n        let layerIds = [];\r\n        for(let layer of this._layers) {\r\n            let layerData = this.tiledData.layers[layer.layerId];\r\n\t\t\tif(layerData.properties) {\r\n                let hiddenData = TiledManager.checkLayerHidden(layerData);\r\n\t\t\t\tlet hasHideProperties = hiddenData[0];\r\n                let hideLayer = hiddenData[1];\r\n                \r\n\t\t\t\t/* If the layer has a hide property, run this code.\r\n\t\t\t\t * You don't need to run it for layers that don't have any properties that would\r\n\t\t\t\t   hide this layer. */\r\n\t\t\t\tif (hasHideProperties) {\r\n\t\t\t\t\t/* If the layer isn't supposed to be hidden, add the layer to the container */\r\n\t\t\t\t\tif (!hideLayer) {\r\n\t\t\t\t\t\tthis.addChild(layer);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/* Otherwise remove the layer and hide it */\r\n\t\t\t\t\tlayerIds.push(layer.layerId);\r\n\t\t\t\t\tthis.removeChild(layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n\t\t/* Hide priority tiles that are supposed to be hidden */\r\n        this._priorityTiles.forEach(sprite => {\r\n            if(layerIds.indexOf(sprite.layerId) > -1) {\r\n                sprite.visible = false;\r\n            }\r\n        })\r\n    }\r\n\t\r\n    _compareChildOrder(a, b) {\r\n        if ((a.z || 0) !== (b.z || 0)) {\r\n            return (a.z || 0) - (b.z || 0);\r\n        } else if (((a.y || 0) + (a.locationHeight || 0)) !== ((b.y || 0) + (b.locationHeight || 0))) {\r\n            return ((a.y || 0) + (a.locationHeight || 0)) - ((b.y || 0) + (b.locationHeight || 0));\r\n        } else if ((a.priority || 0) !== (b.priority || 0)) {\r\n            return (a.priority || 0) - (b.priority || 0);\r\n        } else {\r\n            return a.spriteId - b.spriteId;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/TiledTilemap.js","import \"./TilesetManager\";\nimport \"./DataManager\";\nimport \"./ImageManager\";\nimport \"./TiledManager\";\nimport { TiledTilemap } from \"./TiledTilemap\";\nimport \"./Game_Map\";\nimport \"./Game_CharacterBase\";\nimport \"./Game_Player\";\nimport \"./Sprite_Character\";\nimport \"./Spriteset_Map\";\n\n/* INITIALIZES LISTENERS */\n\n// Add floor damage while on a slippery floor\nTiledManager.addListener(Game_Player, 'slipperyfloor', function(options) {\n    const {d} = options\n    $gameParty.members().forEach(actor => {\n        actor.checkFloorEffect();\n    })\n    this.moveStraight(d);\n})\n\n/* INITIALIZES HIDE FUNCTIONS */\n\nTiledManager.addHideFunction('hideOnRegion', function(layerData) {\n    /* Hide if player is on certain region */\n    let regionId = $gameMap.regionId($gamePlayer.x, $gamePlayer.y);\n    let hideLayer = false;\n    if(parseInt(layerData.properties.hideOnRegion) === regionId) {\n        hideLayer = true;\n    }\n    return hideLayer;\n}, ['regions'])\n\nTiledManager.addHideFunction('hideOnRegions', function(layerData) {\n    /* Hide if player is on certain region */\n    let regionId = $gameMap.regionId($gamePlayer.x, $gamePlayer.y);\n    let hideLayer = false;\n    if(layerData.properties.hideOnRegions.split(',').indexOf(String(regionId)) !== -1) {\n        hideLayer = true;\n    }\n    return hideLayer;\n}, ['regions'])\n\nTiledManager.addHideFunction('hideOnAnyRegions', function(layerData) {\n    /* Hide if player is on certain region */\n    let regionIds = $gameMap.regionIds($gamePlayer.x, $gamePlayer.y);\n    let hideLayer = false;\n    let regions = layerData.properties.hideOnRegions.split(',');\n    if(regions.filter(region => regionIds.indexOf(region) > -1).length > 0) {\n        hideLayer = true;\n    }\n    return hideLayer;\n}, ['regions'])\n\nTiledManager.addHideFunction('hideOnSwitch', function(layerData) {\n    /* Hide if switch is on */\n    let hideLayer = false;\n    if($gameSwitches.value(layerData.properties.hideOnSwitch)) {\n        hideLayer = true;\n    }\n    return hideLayer;\n})\n\nTiledManager.addHideFunction('showOnSwitch', function(layerData) {\n    /* Show if switch is on */\n    let hideLayer = false;\n    if(!$gameSwitches.value(layerData.properties.hideOnSwitch)) {\n        hideLayer = true;\n    }\n    return hideLayer;\n})\n\n/* INITIALIZES FLAGS */\n\nTiledManager.addFlag('boat', 'ship', 'airship')\nTiledManager.addFlag('ladder', 'bush', 'counter', 'damage')\nTiledManager.addFlag('ice', 'autoDown', 'autoLeft', 'autoRight', 'autoUp')\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","//-----------------------------------------------------------------------------\r\n// TilesetManager\r\n//\r\n// The static class that manages the TileD tilesets.\r\n\r\nfunction TilesetManager() {\r\n    throw new Error('This is a static class');\r\n}\r\n\r\nwindow.TilesetManager = TilesetManager;\r\nTilesetManager.tilesets = {};\r\n\r\nlet _getFilename = function(path) {\r\n    let paths = path.split(\"/\");\r\n    return paths[paths.length - 1];\r\n};\r\n\r\nlet _getRealPath = function(path) {\r\n    let pluginParams = PluginManager.parameters(\"YED_Tiled\");\r\n    return pluginParams[\"Tilesets Location\"] + _getFilename(path);\r\n};\r\n\r\nTilesetManager.getTileset = function(path) {\r\n    let realPath = _getRealPath(path);\r\n    return TilesetManager.tilesets[_getFilename(path)];\r\n};\r\n\r\nTilesetManager.loadTileset = function(path, callback = false) {\r\n    let realPath = _getRealPath(path);\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open('GET', './' + realPath);\r\n    xhr.overrideMimeType('application/json');\r\n\r\n    // on success callback\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === 4) {\r\n            let tileset = false;\r\n            if (xhr.status === 200 || xhr.responseText !== \"\") {\r\n                tileset = JSON.parse(xhr.responseText);\r\n                TilesetManager.tilesets[_getFilename(path)] = tileset;\r\n            }\r\n            if(callback) {\r\n                callback(tileset);\r\n            }\r\n        }\r\n    };\r\n\r\n    // send request\r\n    xhr.send();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TilesetManager.js","DataManager._tempTiledData = null;\nDataManager._tiledLoaded = false;\n\nlet _loadMapData = DataManager.loadMapData;\nDataManager.loadMapData = function (mapId) {\n    _loadMapData.call(this, mapId);\n    if (mapId > 0) {\n        this.loadTiledMapData(mapId);\n    } else {\n        this.unloadTiledMapData();\n    }\n};\n\nDataManager.loadTiledMapData = function (mapId) {\n    var xhr = new XMLHttpRequest();\n    let pluginParams = PluginManager.parameters(\"YED_Tiled\");\n    xhr.open('GET', \"./\" + pluginParams[\"Maps Location\"] + \"Map\" + mapId + \".json\");\n    xhr.overrideMimeType('application/json');\n\n    // on success callback\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            if (xhr.status === 200 || xhr.responseText !== \"\") {\n                DataManager._tempTiledData = JSON.parse(xhr.responseText);\n            }\n            let tiledLoaded = true;\n            let tilesRequired = 0;\n            if(DataManager._tempTiledData && DataManager._tempTiledData.tilesets && DataManager._tempTiledData.tilesets.length > 0) {\n                for(var idx = 0; idx < DataManager._tempTiledData.tilesets.length; idx++) {\n                    let tileset = DataManager._tempTiledData.tilesets[idx];\n                    if(tileset.source) {\n                        let realTileset = TilesetManager.getTileset(tileset.source);\n                        if(realTileset) {\n                            DataManager._tempTiledData.tilesets[idx] = Object.assign({}, realTileset, {firstgid: DataManager._tempTiledData.tilesets[idx].firstgid});\n                        } else {\n                            tiledLoaded = false;\n                            tilesRequired++;\n                            +function(idx) {\n                                TilesetManager.loadTileset(tileset.source, function(returnTileset) {\n                                    DataManager._tempTiledData.tilesets[idx] = Object.assign({}, returnTileset, {firstgid: DataManager._tempTiledData.tilesets[idx].firstgid});\n                                    tilesRequired--;\n                                    if(tilesRequired === 0) {\n                                        DataManager._tiledLoaded = true;\n                                    }\n                                });\n                            }(idx);\n                        }\n                    }\n                }\n            }\n            DataManager._tiledLoaded = tiledLoaded;\n        }\n    };\n\n    // set data to null and send request\n    this.unloadTiledMapData();\n    xhr.send();\n};\n\nDataManager.unloadTiledMapData = function () {\n    DataManager._tempTiledData = null;\n    DataManager._tiledLoaded = false;\n};\n\nlet _isMapLoaded = DataManager.isMapLoaded;\nDataManager.isMapLoaded = function() {\n    let defaultLoaded = _isMapLoaded.call(this);\n    let tiledLoaded = DataManager._tiledLoaded;\n\n    return defaultLoaded && tiledLoaded;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/DataManager.js","ImageManager.loadParserTileset = function (path, hue) {\n    if (!path) {\n        return this.loadEmptyBitmap();\n    }\n    let paths = path.split(\"/\");\n    let filename = paths[paths.length - 1];\n    let realPath = \"img/tilesets/\" + filename;\n\n    return this.loadNormalBitmap(realPath, hue);\n};\n\nImageManager.loadParserParallax = function (path, hue) {\n    if (!path) {\n        return this.loadEmptyBitmap();\n    }\n    let paths = path.split(\"/\");\n    let filename = paths[paths.length - 1];\n    let realPath = \"img/parallaxes/\" + filename;\n\n    return this.loadNormalBitmap(realPath, hue);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/ImageManager.js","//-----------------------------------------------------------------------------\r\n// TiledManager\r\n//\r\n// The static class that manages TileD data, including extensions.\r\n\r\nfunction TiledManager() {\r\n    throw new Error('This is a static class');\r\n}\r\n\r\nwindow.TiledManager = TiledManager;\r\n\r\nlet _listeners = {}\r\nlet _hideFunctions = {}\r\nlet _hideIgnoreFunctions = {\r\n    regions: [],\r\n    collisions: [],\r\n    levelChanges: [],\r\n    tileFlags: []\r\n}\r\nlet _tileFlags = {}\r\nlet _tileFlagIndex = 1;\r\n\r\nTiledManager.addListener = function(objectName, listener, callback, recursive = true) {\r\n    if(typeof objectName === 'function') {\r\n        objectName = objectName.name\r\n    }\r\n    if(!_listeners[objectName]) {\r\n        _listeners[objectName] = {}\r\n    }\r\n    if(!_listeners[objectName][listener]) {\r\n        _listeners[objectName][listener] = []\r\n    }\r\n    callback.recursive = !!recursive\r\n    _listeners[objectName][listener].push(callback)\r\n}\r\n\r\nTiledManager.triggerListener = function(object, listener, options = {}) {\r\n    let objectName = object.constructor.name\r\n    if(!_listeners[objectName] || !_listeners[objectName][listener]) {\r\n        return false\r\n    }\r\n    let top = true\r\n    let proto = object.__proto__\r\n    while(proto) {\r\n        objectName = proto.constructor.name\r\n        if(_listeners[objectName] && _listeners[objectName][listener]) {\r\n            _listeners[objectName][listener].forEach(callback => {\r\n                if(top || callback.recursive) {\r\n                    callback.call(object, options)\r\n                }\r\n            })\r\n        }\r\n        top = false\r\n        proto = proto.__proto__\r\n    }\r\n}\r\n\r\nTiledManager.addHideFunction = function(id, callback, ignore = []) {\r\n    _hideFunctions[id] = callback\r\n\r\n    ignore.forEach((type) => {\r\n        _hideIgnoreFunctions[type].push(id)\r\n    })\r\n}\r\n\r\nTiledManager.checkLayerHidden = function(layerData, ignore = []) {\r\n    if(typeof ignore === 'string') {\r\n        ignore = _hideIgnoreFunctions[ignore] || []\r\n    }\r\n    let keys = Object.keys(_hideFunctions);\r\n    let data = [false, false];\r\n    for(let idx = 0; idx < keys.length; idx++) {\r\n        if(ignore.indexOf(keys) !== -1) {\r\n            continue;\r\n        }\r\n        if(layerData.properties && layerData.properties.hasOwnProperty(keys[idx])) {\r\n            data[0] = true;\r\n            data[1] = data[1] || _hideFunctions[keys[idx]](layerData);\r\n        }\r\n        if(data[1]) {\r\n            return data;\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\nTiledManager.addFlag = function(...flagIds) {\r\n    flagIds.forEach(flagId => {\r\n        _tileFlags[flagId] = _tileFlagIndex++;\r\n    })\r\n}\r\n\r\nTiledManager.getFlag = function(flagId) {\r\n    return _tileFlags[flagId];\r\n}\r\n\r\nTiledManager.getFlagNames = function() {\r\n    return Object.keys(_tileFlags);\r\n}\r\n\r\nTiledManager.getFlagLocation = function(flagId) {\r\n    let flag = _tileFlags[flagId]\r\n    let bit = (1 << (flag % 16)) & 0xffff;\r\n    let group = Math.floor(flag / 16);\r\n    return [group, bit];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TiledManager.js","// Constants\n\nObject.defineProperty(Game_Map.prototype, 'tiledData', {\n    get: function () {\n        return DataManager._tempTiledData;\n    },\n    configurable: true\n});\n\nObject.defineProperty(Game_Map.prototype, 'currentMapLevel', {\n    get: function () {\n        let pluginParams = PluginManager.parameters(\"YED_Tiled\");\n        let varID = parseInt(pluginParams[\"Map Level Variable\"]);\n        if (!varID) {\n            return this._currentMapLevel;\n        } else {\n            return $gameVariables.value(varID);\n        }\n    },\n    set: function (value) {\n        let pluginParams = PluginManager.parameters(\"YED_Tiled\");\n        let varID = parseInt(pluginParams[\"Map Level Variable\"]);\n        if (!varID) {\n            this._currentMapLevel = value;\n        } else {\n            $gameVariables.setValue(varID, value);\n        }\n    },\n    configurable: true\n});\n\nlet _setup = Game_Map.prototype.setup;\nGame_Map.prototype.setup = function (mapId) {\n    _setup.call(this, mapId);\n    this._collisionMap = {};\n    this._arrowCollisionMap = {};\n    this._regions = {};\n    this._mapLevelChange = {};\n    this._tileFlags = {};\n    this._collisionMapLayers = [];\n    this._arrowCollisionMapLayers = [];\n    this._regionsLayers = [];\n    this._mapLevelChangeLayers = [];\n    this._tileFlagsLayers = [];\n    this._currentMapLevel = 0;\n    this.currentMapLevel = 0;\n    if (this.isTiledMap()) {\n        $dataMap.width = this.tiledData.width;\n        $dataMap.height = this.tiledData.height;\n        this._setupTiled();\n        this._tiledInitialized = true;\n        if(this._refreshList) {\n            this._refreshList.forEach(character => {\n                character.refreshBushDepth();\n            })\n        }\n    }\n};\n\nGame_Map.prototype.isTiledInitialized = function() {\n    return !!this._tiledInitialized;\n}\n\nGame_Map.prototype.setRefreshDepth = function(character) {\n    if(!this._refreshList) {\n        this._refreshList = [];\n    }\n    this._refreshList.push(character);\n}\n\nGame_Map.prototype.isTiledMap = function () {\n    return !!this.tiledData;\n};\n\nGame_Map.prototype.hasHideProperties = function(layerData) {\n    return (layerData.properties && (\n        layerData.properties.hideOnRegion ||\n        layerData.properties.hideOnRegions ||\n        layerData.properties.hideOnSwitch)\n    );\n}\n\nGame_Map.prototype._setupTiled = function () {\n    this._initializeMapLevel(0);\n\n    this._setupCollision();\n    this._setupRegion();\n    this._setupMapLevelChange();\n    this._setupTileFlags();\n    this._setupTiledEvents();\n};\n\nGame_Map.prototype._initializeMapLevel = function (id) {\n    if (!!this._collisionMap[id]) {\n        return;\n    }\n\n    this._collisionMap[id] = {};\n    this._arrowCollisionMap[id] = {};\n    this._regions[id] = {};\n    this._mapLevelChange[id] = {};\n    this._tileFlags[id] = {};\n    this._collisionMapLayers[id] = [];\n    this._arrowCollisionMapLayers[id] = [];\n    this._regionsLayers[id] = [];\n    this._mapLevelChangeLayers[id] = [];\n    this._tileFlagsLayers[id] = [];\n    this._initializeMapLevelData(id);\n};\n\nGame_Map.prototype._initializeMapLevelData = function(id = 0, layerId = 'main', dataTypes = false) {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    \n    const defaultData = {\n        'collisionMap': 0,\n        'arrowCollisionMap': 1 | 2 | 4 | 8,\n        'regions': 0,\n        'mapLevelChange': -1,\n        'tileFlags': 0\n    }\n\n    if(!dataTypes) {\n        dataTypes = Object.keys(defaultData);\n    }\n\n    for(let idx = 0; idx < dataTypes.length; idx++) {\n        let dataType = dataTypes[idx];\n        let defaultValue = defaultData[dataType];\n        if(!!this['_' + dataType][id][layerId]) {\n            continue;\n        }\n        this['_' + dataType][id][layerId] = []\n        let typeData = this['_' + dataType][id][layerId]\n        for (let x of Array(size).keys()) {\n            typeData.push(defaultValue);\n        }\n    }\n}\n\nGame_Map.prototype._setupCollision = function () {\n    this._setupCollisionFull();\n    this._setupCollisionArrow();\n};\n\nGame_Map.prototype._setupCollisionFull = function () {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    let halfWidth = width / 2;\n    let halfHeight = height / 2;\n\n    if (this.isHalfTile()) {\n        size /= 4;\n    }\n\n    for (let idx = 0; idx < this.tiledData.layers.length; idx++) {\n        let layerData = this.tiledData.layers[idx]\n        if (!layerData.properties || !layerData.properties.collision) {\n            continue;\n        }\n\n        if (layerData.properties.collision !== \"full\"\n            && layerData.properties.collision !== \"up-left\"\n            && layerData.properties.collision !== \"up-right\"\n            && layerData.properties.collision !== \"down-left\"\n            && layerData.properties.collision !== \"down-right\"\n            && layerData.properties.collision !== \"tiles\") {\n            continue;\n        }\n\n        let level = parseInt(layerData.properties.level) || 0;\n        this._initializeMapLevel(level);\n        \n        let layerId = 'main';\n\n        if(this.hasHideProperties(layerData)) {\n            layerId = idx;\n            this._collisionMapLayers[level].push(idx);\n            this._initializeMapLevelData(level, layerId, ['collisionMap']);\n        }\n        \n        for (let x of Array(size).keys()) {\n            let realX = x;\n            let ids = [];\n            if (this.isHalfTile()) {\n                realX = Math.floor(x / halfWidth) * width * 2 + (x % halfWidth) * 2;\n            }\n            if (!!layerData.data[x]) {\n                switch(layerData.properties.collision) {\n                    case \"full\":\n                        ids.push(realX);\n                        if (this.isHalfTile()) {\n                            ids.push(realX + 1, realX + width, realX + width + 1);\n                        }\n                        break;\n                    case \"up-left\":\n                        ids.push(realX);\n                        break;\n                    case \"up-right\":\n                        ids.push(realX + 1);\n                        break;\n                    case \"down-left\":\n                        ids.push(realX + width);\n                        break;\n                    case \"down-right\":\n                        ids.push(realX + width + 1);\n                        break;\n                    case \"tiles\":\n                        let tileId = layerData.data[x];\n                        let tileset = this._getTileset(tileId);\n                        if(tileset && tileset.tileproperties) {\n                            let tileData = tileset.tileproperties[tileId - tileset.firstgid];\n                            if(tileData) {\n                                if(tileData.collision) {\n                                    ids.push(realX);\n                                    if (this.isHalfTile()) {\n                                        ids.push(realX + 1, realX + width, realX + width + 1);\n                                    }\n                                }\n                                if(tileData.collisionUpLeft) {\n                                    ids.push(realX);\n                                }\n                                if(tileData.collisionUpRight) {\n                                    ids.push(realX + 1);\n                                }\n                                if(tileData.collisionDownLeft) {\n                                    ids.push(realX + width);\n                                }\n                                if(tileData.collisionDownRight) {\n                                    ids.push(realX + width + 1);\n                                }\n                            }\n                        }\n                        break;\n                }\n                for (let id of ids) {\n                    this._collisionMap[level][layerId][id] = 1;\n                }\n            }\n        }\n    }\n};\n\nGame_Map.prototype._setupCollisionArrow = function () {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    let bit = 0;\n    let halfWidth = width / 2;\n    let halfHeight = height / 2;\n\n    if (this.isHalfTile()) {\n        size /= 4;\n    }\n\n    for (let idx = 0; idx < this.tiledData.layers.length; idx++) {\n        let layerData = this.tiledData.layers[idx]\n        if (!layerData.properties || !layerData.properties.collision) {\n            continue;\n        }\n\n        if (layerData.properties.collision !== \"arrow\" && layerData.properties.collision !== \"tiles\") {\n            continue;\n        }\n\n        if (!layerData.properties.arrowImpassable && layerData.properties.collision !== \"tiles\") {\n            continue;\n        }\n        \n        if(layerData.properties.arrowImpassable) {\n\n            if (layerData.properties.arrowImpassable === \"down\") {\n                bit = 1;\n            }\n\n            if (layerData.properties.arrowImpassable === \"left\") {\n                bit = 2;\n            }\n\n            if (layerData.properties.arrowImpassable === \"right\") {\n                bit = 4;\n            }\n\n            if (layerData.properties.arrowImpassable === \"up\") {\n                bit = 8;\n            }\n\n\n        }\n\n        let level = parseInt(layerData.properties.level) || 0;\n        this._initializeMapLevel(level);\n        \n        let layerId = 'main';\n\n        if(this.hasHideProperties(layerData)) {\n            layerId = idx;\n            this._arrowCollisionMapLayers[level].push(idx);\n            this._initializeMapLevelData(level, layerId, ['arrowCollisionMap']);\n        }\n        \n        let arrowCollisionMap = this._arrowCollisionMap[level][layerId];\n        for (let x of Array(size).keys()) {\n            let realX = x;\n            if (this.isHalfTile()) {\n                realX = Math.floor(x / halfWidth) * width * 2 + (x % halfWidth) * 2;\n            }\n\n            if (!!layerData.data[x]) {\n                let realBit = bit;\n                if(layerData.properties.collision === \"tiles\") {\n                    realBit = 0;\n                    let tileId = layerData.data[x];\n                    let tileset = this._getTileset(tileId);\n                    if(tileset && tileset.tileproperties) {\n                        let tileData = tileset.tileproperties[tileId - tileset.firstgid];\n                        if(tileData) {\n                            if(tileData.arrowImpassableDown) {\n                                realBit+= 1;\n                            }\n                            if(tileData.arrowImpassableLeft) {\n                                realBit+= 2;\n                            }\n                            if(tileData.arrowImpassableRight) {\n                                realBit+= 4;\n                            }\n                            if(tileData.arrowImpassableUp) {\n                                realBit+= 8;\n                            }\n                        }\n                    }\n                }\n                arrowCollisionMap[realX] = arrowCollisionMap[realX] ^ realBit;\n                if (this.isHalfTile()) {\n                    arrowCollisionMap[realX + 1]\n                        = arrowCollisionMap[realX + 1] ^ realBit;\n                    arrowCollisionMap[realX + width]\n                        = arrowCollisionMap[realX + width] ^ realBit;\n                    arrowCollisionMap[realX + width + 1]\n                        = arrowCollisionMap[realX + width + 1] ^ realBit;\n                }\n            }\n        }\n    }\n};\n\nGame_Map.prototype._setupRegion = function () {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    let halfWidth = width / 2;\n    let halfHeight = height / 2;\n\n    if (this.isHalfTile()) {\n        size /= 4;\n    }\n\n    for (let idx = 0; idx < this.tiledData.layers.length; idx++) {\n        let layerData = this.tiledData.layers[idx]\n        if (!layerData.properties || !layerData.properties.regionId) {\n            continue;\n        }\n\n        let level = parseInt(layerData.properties.level) || 0;\n        this._initializeMapLevel(level);\n        \n        let layerId = 'main';\n\n        if(this.hasHideProperties(layerData)) {\n            layerId = idx;\n            this._regionsLayers[level].push(idx);\n            this._initializeMapLevelData(level, layerId, ['regions']);\n        }\n        \n        let regionMap = this._regions[level][layerId];\n\n        for (let x of Array(size).keys()) {\n            let realX = x;\n            if (this.isHalfTile()) {\n                realX = Math.floor(x / halfWidth) * width * 2 + (x % halfWidth) * 2;\n            }\n\n            if (!!layerData.data[x]) {\n                let regionId = 0;\n                if(layerData.properties.regionId > -1) {\n                    regionId = parseInt(layerData.properties.regionId);\n                } else {\n                    let tileId = layerData.data[x];\n                    let tileset = this._getTileset(tileId);\n                    if(tileset && tileset.tileproperties) {\n                        let tileData = tileset.tileproperties[tileId - tileset.firstgid];\n                        if(tileData && tileData.regionId) {\n                            regionId = parseInt(tileData.regionId);\n                        }\n                    }\n                    if(layerData.properties.regionOffset) {\n                        regionId+= layerData.properties.regionOffset;\n                    }\n                }\n                regionMap[realX] = regionId;\n                if (this.isHalfTile()) {\n                    regionMap[realX + 1] = regionId;\n                    regionMap[realX + width] = regionId;\n                    regionMap[realX + width + 1] = regionId;\n                }\n            }\n        }\n    }\n};\n\nGame_Map.prototype._setupMapLevelChange = function () {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    let halfWidth = width / 2;\n    let halfHeight = height / 2;\n\n    if (this.isHalfTile()) {\n        size /= 4;\n    }\n\n    for (let idx = 0; idx < this.tiledData.layers.length; idx++) {\n        let layerData = this.tiledData.layers[idx]\n        if (!layerData.properties || !layerData.properties.toLevel) {\n            continue;\n        }\n\n        let level = parseInt(layerData.properties.level) || 0;\n        this._initializeMapLevel(level);\n        let layerId = 'main';\n\n        if(this.hasHideProperties(layerData)) {\n            layerId = idx;\n            this._mapLevelChangeLayers[level].push(idx);\n            this._initializeMapLevelData(level, layerId, ['mapLevelChange']);\n        }\n        \n        let levelChangeMap = this._mapLevelChange[level][layerId];\n\n        for (let x of Array(size).keys()) {\n            let realX = x;\n            let toLevel = parseInt(layerData.properties.toLevel);\n            if (this.isHalfTile()) {\n                realX = Math.floor(x / halfWidth) * width * 2 + (x % halfWidth) * 2;\n            }\n\n            if (!!layerData.data[x]) {\n                levelChangeMap[realX] = toLevel;\n                if (this.isHalfTile()) {\n                    levelChangeMap[realX + 1] = toLevel;\n                    levelChangeMap[realX + width] = toLevel;\n                    levelChangeMap[realX + width + 1] = toLevel;\n                }\n            }\n        }\n    }\n};\n\nGame_Map.prototype._setupTileFlags = function() {\n    let width = this.width();\n    let height = this.height();\n    let size = width * height;\n    let halfWidth = width / 2;\n    let halfHeight = height / 2;\n\n    if (this.isHalfTile()) {\n        size /= 4;\n    }\n    \n    for (let idx = 0; idx < this.tiledData.layers.length; idx++) {\n        let layerData = this.tiledData.layers[idx]\n        if (!layerData.properties || !layerData.properties.tileFlags) {\n            continue;\n        }\n\n        let level = parseInt(layerData.properties.level) || 0;\n        this._initializeMapLevel(level);\n        \n        let layerId = 'main';\n\n        if(this.hasHideProperties(layerData)) {\n            layerId = idx;\n            this._tileFlagsLayers[level].push(idx);\n            this._initializeMapLevelData(level, layerId, ['tileFlags']);\n        }\n        \n        let tileFlagMap = this._tileFlags[level][layerId];\n\n        for (let x of Array(size).keys()) {\n            let realX = x;\n            if (this.isHalfTile()) {\n                realX = Math.floor(x / halfWidth) * width * 2 + (x % halfWidth) * 2;\n            }\n\n            if (!!layerData.data[x]) {\n                let tileFlags = 0;\n                let tileId = layerData.data[x];\n                let tileset = this._getTileset(tileId);\n                if(tileset && tileset.tileproperties) {\n                    let tileData = tileset.tileproperties[tileId - tileset.firstgid];\n                    if(tileData) {\n                        tileFlags = this._getTileFlags(tileData);\n                    }\n                }\n                tileFlagMap[realX] = this._combineFlags(tileFlagMap[realX], tileFlags);\n                if (this.isHalfTile()) {\n                    tileFlagMap[realX + 1] = this._combineFlags(tileFlagMap[realX + 1], tileFlags);\n                    tileFlagMap[realX + width] = this._combineFlags(tileFlagMap[realX + width], tileFlags);\n                    tileFlagMap[realX + width + 1] = this._combineFlags(tileFlagMap[realX + width + 1], tileFlags);\n                }\n            }\n        }\n    }\n}\n\nGame_Map.prototype._getTileFlags = function(tileData) {\n    let flags = []\n    let flagNames = TiledManager.getFlagNames()\n    flagNames.forEach(prop => {\n        let property = 'flagIs' + prop.slice(0, 1).toUpperCase() + prop.slice(1)\n        if(tileData[property]) {\n            let [group, bit] = TiledManager.getFlagLocation(prop)\n            for(let i = flags.length; i <= group; i++) {\n                flags.push(0)\n            }\n            flags[group]|= bit\n        }\n    })\n    return flags.length > 0 ? flags : 0\n}\n\nGame_Map.prototype._combineFlags = function (source, target) {\n    source = source ? source.slice(0) : []\n    for(let i = 0; i < target.length; i++) {\n        if(!source.length <= i) {\n            source.push(i)\n        }\n        source[i]|= target[i];\n    }\n    return source;\n}\n\nGame_Map.prototype._setupTiledEvents = function () {\n    for (let layerData of this.tiledData.layers) {\n        if (layerData.type !== \"objectgroup\") {\n            continue;\n        }\n\n        for (let object of layerData.objects) {\n            if (!object.properties) {\n                continue;\n            }\n\n            if (!object.properties.eventId) {\n                continue;\n            }\n\n            let eventId = parseInt(object.properties.eventId);\n            let event = this._events[eventId];\n            if (!event) {\n                continue;\n            }\n            let x = Math.floor(object.x / this.tileWidth());\n            let y = Math.floor(object.y / this.tileHeight());\n            if (this.isHalfTile()) {\n                x += 1;\n                y += 1;\n            }\n            event.locate(x, y);\n\t\t\tevent._tiledProperties = object.properties;\n        }\n    }\n};\n\nGame_Map.prototype.isHalfTile = function () {\n    let pluginParams = PluginManager.parameters(\"YED_Tiled\");\n    return pluginParams[\"Half-tile movement\"].toLowerCase() === \"true\";\n};\n\nGame_Map.prototype._getTileset = function(tileId) {\n    for(let idx = 0; idx < this.tiledData.tilesets.length; idx++) {\n        let tileset = this.tiledData.tilesets[idx];\n        if(tileId >= tileset.firstgid && tileId < tileset.firstgid + tileset.tilecount) {\n            return tileset;\n        }\n    }\n    return null;\n};\n\nGame_Map.prototype.tileWidth = function () {\n    let tileWidth = this.tiledData.tilewidth;\n    if (this.isHalfTile()) {\n        tileWidth /= 2;\n    }\n    return tileWidth;\n};\n\nGame_Map.prototype.tileHeight = function () {\n    let tileHeight = this.tiledData.tileheight;\n    if (this.isHalfTile()) {\n        tileHeight /= 2;\n    }\n    return tileHeight;\n};\n\nGame_Map.prototype.width = function () {\n    let width = this.tiledData.width;\n    if (this.isHalfTile()) {\n        width *= 2;\n    }\n    return width;\n};\n\nGame_Map.prototype.height = function () {\n    let height = this.tiledData.height;\n    if (this.isHalfTile()) {\n        height *= 2;\n    }\n    return height;\n};\n\nlet _regionId = Game_Map.prototype.regionId;\nGame_Map.prototype.regionId = function (x, y, allIds = false) {\n    if (!this.isTiledMap()) {\n        return _regionId.call(this, x, y);\n    }\n\n    let index = x + this.width() * y;\n    let regionMap = this._regions[this.currentMapLevel];\n    let regionLayer = this._regionsLayers[this.currentMapLevel];\n    \n    let regionValue = regionMap.main[index];\n    let regionValues = [regionValue];\n\n    if(regionLayer && regionLayer.length > 0) {\n        for(let idx = 0; idx < regionLayer.length; idx++) {\n            let layerId = regionLayer[idx];\n            let layerData = this.tiledData.layers[layerId];\n            let hideData = TiledManager.checkLayerHidden(layerData, 'regions');\n            if(!hideData[1]) {\n                if(allIds) {\n                    regionValues.push(regionMap[layerId][index]);\n                } else {\n                    regionValue = regionMap[layerId][index];\n                }\n            }\n        }\n    }\n\n    return allIds ? regionValues : regionValue;\n};\n\nGame_Map.prototype.regionIds = function (x, y) {\n    return this.regionId(x, y, true);\n}\n\nlet _checkPassage = Game_Map.prototype.checkPassage;\nGame_Map.prototype.checkPassage = function (x, y, bit, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _checkPassage.call(this, x, y, d);\n    }\n    if(level === false) {\n        level = this._currentMapLevel;\n    }\n    let index = x + this.width() * y;\n    let arrows = this._arrowCollisionMap[level];\n    let arrowLayer = this._arrowCollisionMapLayers[level];\n    let arrowValue = arrows.main[index];\n    \n    if(render && arrows[render]) {\n        arrowValue = arrows[render][index];\n    } else if(arrowLayer && arrowLayer.length > 0) {\n        for(let idx = 0; idx < arrowLayer.length; idx++) {\n            let layerId = arrowLayer[idx];\n            let layerData = this.tiledData.layers[layerId];\n            let hideData = TiledManager.checkLayerHidden(layerData, 'collisions');\n            if(!hideData[1]) {\n                arrowValue&= regionMap[layerId][index];\n            }\n        }\n    }\n\n    return (arrowValue & bit) > 0\n}\n\nGame_Map.prototype.renderPassage = function (x, y, bit, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    if(render && !this._arrowCollisionMap[level][render]) {\n        render = 'main';\n    }\n    return this.checkPassage(x, y, bit, render, level);\n}\n\nGame_Map.prototype.getPassageLayers = function(level) {\n    return this._arrowCollisionMapLayers[level].slice(0);\n}\n\nlet _isPassable = Game_Map.prototype.isPassable;\nGame_Map.prototype.isPassable = function (x, y, d, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isPassable.call(this, x, y, d);\n    }\n    if(level === false) {\n        level = this._currentMapLevel;\n    }\n\n    if(!this.checkPassage(x, y, (1 << (d / 2 - 1)) & 0x0f, render)) {\n        return false;\n    }\n    \n    let index = x + this.width() * y;\n    let collisionMap = this._collisionMap[level];\n    let collisionLayer = this._collisionMapLayers[level];\n    let collisionValue = collisionMap.main[index]\n    \n    if(render && collisionMap[render]) {\n        collisionValue = collisionMap[render][index];\n    } else if(collisionLayer && collisionLayer.length > 0) {\n        for(let idx = 0; idx < collisionLayer.length; idx++) {\n            let layerId = collisionLayer[idx];\n            let layerData = this.tiledData.layers[layerId];\n            let hideData = TiledManager.checkLayerHidden(layerData, 'collisions');\n            if(!hideData[1]) {\n                collisionValue|= collisionMap[layerId][index];\n            }\n        }\n    }\n\n    return collisionValue === 0;\n};\n\nGame_Map.prototype.renderIsPassable = function (x, y, d, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    if(render && !this._collisionMap[level][render]) {\n        render = 'main';\n    }\n    return this.isPassable(x, y, d, render, level);\n}\n\nGame_Map.prototype.getIsPassableLayers = function(level) {\n    return this._collisionMapLayers[level].slice(0);\n}\n\nGame_Map.prototype.checkMapLevelChanging = function (x, y) {\n    let mapLevelChange = this._mapLevelChange[this.currentMapLevel];\n    let mapLevelChangeLayer = this._mapLevelChangeLayers[this.currentMapLevel];\n    let index = y * this.width() + x;\n    let mapLevelChangeValue = mapLevelChange.main[index]\n    if(mapLevelChangeLayer.length > 0) {\n        for(let idx = 0; idx < mapLevelChangeLayer.length; idx++) {\n            let layerId = mapLevelChangeLayer[idx];\n            let layerData = this.tiledData.layers[layerId];\n            let hideData = TiledManager.checkLayerHidden(layerData, 'levelChanges');\n            if(!hideData[1]) {\n                mapLevelChangeValue = mapLevelChange[layerId][index];\n            }\n        }\n    }\n    if (mapLevelChangeValue < 0) {\n        return false;\n    }\n    this.currentMapLevel = mapLevelChangeValue;\n    return true;\n};\n\nGame_Map.prototype.getTileFlags = function (x, y, render = false, level = false) {\n    if(level === false) {\n        level = 0;\n    }\n    let index = x + this.width() * y;\n    let tileFlags = this._tileFlags[level];\n    let tileFlagsLayer = this._tileFlagsLayers[level];\n    let tileFlagsValue = (tileFlags.main[index] ? tileFlags.main[index].slice(0) : []);\n\n    if(render && tileFlags[render]) {\n        tileFlagsValue = (tileFlags[render][index] ? tileFlags[render][index].slice(0) : []);\n    } else if(tileFlagsLayer && tileFlagsLayer.length > 0) {\n        for(let idx = 0; idx < tileFlagsLayer.length; idx++) {\n            let layerId = tileFlagsLayer[idx];\n            let layerData = this.tiledData.layers[layerId];\n            let hideData = TiledManager.checkLayerHidden(layerData, 'tileFlags');\n            if(!hideData[1] && tileFlags[layerId][index]) {\n                tileFlagsValue[i] = this._combineFlags(tileFlagsValue[i], tileFlags[layerId][index])\n            }\n        }\n    }\n    return tileFlagsValue\n}\n\nGame_Map.prototype.renderTileFlags = function (x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    if(render && !this._tileFlags[level][render]) {\n        render = 'main';\n    }\n    return this.getTileFlags(x, y, render, level);\n}\n\nGame_Map.prototype.checkHasTileFlag = function (x, y, flag, render = false, level = false) {\n    if(level === false) {\n        level = 0;\n    }\n    if(typeof flag === 'string') {\n        flag = TiledManager.getFlag(flag)\n    }\n    let bit = (1 << (flag % 16)) & 0xffff;\n    let group = Math.floor(flag / 16);\n    let tileFlagsValue = this.getTileFlags(x, y, render, level);\n    \n    return (tileFlagsValue[group] & bit) > 0\n}\n\nGame_Map.prototype.renderHasTileFlag = function (x, y, flag, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    if(render && !this._tileFlags[level][render]) {\n        render = 'main';\n    }\n    return this.checkHasTileFlag(x, y, flag, render, level);\n}\n\nlet _isBoatPassable = Game_Map.prototype.isBoatPassable\nGame_Map.prototype.isBoatPassable = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isBoatPassable.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.checkHasTileFlag(x, y, 'boat', render, level);\n};\n\nGame_Map.prototype.renderIsBoatPassable = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isBoatPassable(x, y, render, level);\n}\n\nlet _isShipPassable = Game_Map.prototype.isShipPassable\nGame_Map.prototype.isShipPassable = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isShipPassable.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.checkHasTileFlag(x, y, 'ship', render);\n};\n\nGame_Map.prototype.renderIsShipPassable = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isShipPassable(x, y, render, level);\n}\n\nlet _isAirshipLandOk = Game_Map.prototype.isAirshipLandOk\nGame_Map.prototype.isAirshipLandOk = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isAirshipLandOk.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.checkHasTileFlag(x, y, 'airship', render) && this.checkPassage(x, y, 0x0f, render);\n};\n\nGame_Map.prototype.renderIsAirshipLandOk = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isAirshipLandOk(x, y, render, level);\n}\n\nlet _isLadder = Game_Map.prototype.isLadder\nGame_Map.prototype.isLadder = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isLadder.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.isValid(x, y) && this.checkHasTileFlag(x, y, 'ladder', render);\n};\n\nGame_Map.prototype.renderIsLadder = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isLadder(x, y, render, level);\n}\n\nlet _isBush = Game_Map.prototype.isBush\nGame_Map.prototype.isBush = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isBush.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.isValid(x, y) && this.checkHasTileFlag(x, y, 'bush', render);\n};\n\nGame_Map.prototype.renderIsBush = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isBush(x, y, render, level);\n}\n\nlet _isCounter = Game_Map.prototype.isCounter\nGame_Map.prototype.isCounter = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isCounter.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.isValid(x, y) && this.checkHasTileFlag(x, y, 'counter', render);\n};\n\nGame_Map.prototype.renderIsCounter = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isCounter(x, y, render, level);\n}\n\nlet _isDamageFloor = Game_Map.prototype.isDamageFloor\nGame_Map.prototype.isDamageFloor = function(x, y, render = false, level = false) {\n    if (!this.isTiledMap()) {\n        return _isDamageFloor.call(this, x, y);\n    }\n    if(level === false) {\n        level = 0;\n    }\n    return this.isValid(x, y) && this.checkHasTileFlag(x, y, 'damage', render);\n};\n\nGame_Map.prototype.renderIsDamageFloor = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isDamageFloor(x, y, render, level);\n}\n\nGame_Map.prototype.isSlipperyFloor = function(x, y, render = false, level = false) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isValid(x, y) && this.checkHasTileFlag(x, y, 'ice', render);\n};\n\nGame_Map.prototype.renderIsSlipperyFloor = function(x, y, render = 'main', level = 0) {\n    if(level === false) {\n        level = 0;\n    }\n    return this.isSlipperyFloor(x, y, render, level);\n}\n\nGame_Map.prototype.getLayerProperties = function(layer = -1, ignoreHidden = true) {\n\tif(layer > -1) {\n\t\tif(this.tiledData.layers[layer] && this.tiledData.layers[layer].properties) {\n\t\t\treturn Object.assign({}, this.tiledData.layers[layer].properties);\n\t\t}\n\t\treturn {};\n\t}\n\tlet layerProperties = {};\n\tthis.tiledData.layers.forEach((layerData, i) => {\n\t\tif(layerData && layerData.properties) {\n            if(!ignoreHidden || !TiledManager.checkLayerHidden(layerData, 'collisions')[1]) {\n                layerProperties[i] = Object.assign({}, layerData.properties);\n            }\n\t\t}\n\t});\n\treturn layerProperties;\n}\n\nGame_Map.prototype.getTileProperties = function(x, y, layer = -1, ignoreHidden = true) {\n    let index = x + this.width() * y;\n    \n\tif(layer > -1) {\n\t\tif(this.tiledData.layers[layer]) {\n\t\t\tlet tileId = this.tiledData.layers[layer].data[x];\n\t\t\tlet tileset = this._getTileset(tileId);\n\t\t\tif(tileset && tileset.tileproperties) {\n\t\t\t\treturn Object.assign({}, tileset.tileproperties[tileId - tileset.firstgid]);\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t}\n\tlet tileProperties = {};\n\tthis.tiledData.layers.forEach((layerData, i) => {\n\t\tif(layerData && layerData.properties) {\n            if(!ignoreHidden || !TiledManager.checkLayerHidden(layerData)[1]) {\n                tileProperties[i] = this.getTileProperties(x, y, i);\n            }\n\t\t}\n\t});\n\treturn tileProperties;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Game_Map.js","Game_CharacterBase.prototype.screenZ = function () {\n    let pluginParams = PluginManager.parameters(\"YED_Tiled\");\n    if (this._priorityType == 0) {\n        return parseInt(pluginParams[\"Z - Below Player\"]);\n    }\n    if (this._priorityType == 2) {\n        return parseInt(pluginParams[\"Z - Above Player\"]);\n    }\n    return parseInt(pluginParams[\"Z - Player\"]);\n};\n\nlet _distancePerFrame = Game_CharacterBase.prototype.distancePerFrame;\nGame_CharacterBase.prototype.distancePerFrame = function () {\n    let distance = _distancePerFrame.call(this);\n    return distance * (48 / Math.min($gameMap.tileWidth(), $gameMap.tileHeight()));\n};\n\nlet _refreshBushDepth = Game_CharacterBase.prototype.refreshBushDepth;\nGame_CharacterBase.prototype.refreshBushDepth = function() {\n    this._bushDepth = 0;\n    if(!$gameMap.isTiledMap() || $gameMap.isTiledInitialized()) {\n        _refreshBushDepth.call(this);\n    } else {\n        $gameMap.setRefreshDepth(this);\n    }\n};\n\nlet _updateMove = Game_CharacterBase.prototype.updateMove;\nGame_CharacterBase.prototype.updateMove = function() {\n    var hori = (this._realX > this._x ? 4 : (this._realX < this._x ? 6 : 0))\n    var vert = (this._realY > this._y ? 8 : (this._realY < this._y ? 2 : 0))\n    var d = hori + vert\n    _updateMove.call(this);\n    if(!this.isMoving() && $gameMap.isSlipperyFloor(this._x, this._y)) {\n        TiledManager.triggerListener(this, 'slipperyfloor', {\n            d\n        })\n    }\n}\n\nGame_CharacterBase.prototype.locationHeight = function() {\n\treturn this._locationHeight || 0\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Game_CharacterBase.js","let _checkEventTriggerHere = Game_Player.prototype.checkEventTriggerHere;\nGame_Player.prototype.checkEventTriggerHere = function (triggers) {\n    _checkEventTriggerHere.call(this, triggers);\n    this._checkMapLevelChangingHere();\n};\n\nGame_Player.prototype._checkMapLevelChangingHere = function () {\n    $gameMap.checkMapLevelChanging(this.x, this.y);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Game_Player.js","import { TiledTilemap } from \"./TiledTilemap\";\n\nlet _createTilemap = Spriteset_Map.prototype.createTilemap;\nSpriteset_Map.prototype.createTilemap = function () {\n    if (!$gameMap.isTiledMap()) {\n        _createTilemap.call(this);\n        return;\n    }\n    this._tilemap = new TiledTilemap($gameMap.tiledData);\n    this._tilemap.horizontalWrap = $gameMap.isLoopHorizontal();\n    this._tilemap.verticalWrap = $gameMap.isLoopVertical();\n    this.loadTileset();\n    this._baseSprite.addChild(this._tilemap);\n};\n\nlet _loadTileset = Spriteset_Map.prototype.loadTileset;\nSpriteset_Map.prototype.loadTileset = function () {\n    if (!$gameMap.isTiledMap()) {\n        _loadTileset.call(this);\n        return;\n    }\n\n    let i = 0;\n    for (let tileset of $gameMap.tiledData.tilesets) {\n        this._tilemap.bitmaps[i] = ImageManager.loadParserTileset(tileset.image, 0);\n        i++;\n    }\n    this._tilemap.refreshTileset();\n    this._tileset = $gameMap.tiledData.tilesets;\n};\n\nlet _update = Spriteset_Map.prototype.update;\nSpriteset_Map.prototype.update = function () {\n    _update.call(this);\n    this._updateHideOnLevel();\n\tthis._updateHideOnSpecial();\n};\n\nSpriteset_Map.prototype.updateTileset = function () {\n    if (this._tileset !== $gameMap.tiledData.tilesets) {\n        this.loadTileset();\n    }\n};\n\nSpriteset_Map.prototype._updateHideOnLevel = function () {\n    this._tilemap.hideOnLevel($gameMap.currentMapLevel);\n};\n\nSpriteset_Map.prototype._updateHideOnSpecial = function () {\n    if($gamePlayer && $gameMap) {\n        this._tilemap.hideOnSpecial();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Spriteset_Map.js","let _update = Sprite_Character.prototype.update\r\nSprite_Character.prototype.update = function() {\r\n\t_update.call(this);\r\n\tthis.locationHeight = this._character.locationHeight();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Sprite_Character.js"],"sourceRoot":""}